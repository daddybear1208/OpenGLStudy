PROJECT(CloudViewer)
CMAKE_MINIMUM_REQUIRED(VERSION 2.8.3)

STRING(TOUPPER ${PROJECT_NAME} PROJECT_NAME_CAPITALIZED)

ADD_DEFINITIONS(-DUNICODE)
ADD_DEFINITIONS(-DGLEW_STATIC)

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/glew/include)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/Eigen/include)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/QGLViewer)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

LINK_DIRECTORIES(${LIBRARY_OUTPUT_PATH})

FILE( GLOB HEADER_LIST *.h *.hpp)
FILE( GLOB SOURCE_LIST *.cpp *.c *.cxx *.cc)
FILE( GLOB RESOURCE_LIST *.qrc)
FILE( GLOB UI_LIST *.ui)

find_mocable_files(MOCABLE_LIST ${HEADER_LIST})

QT4_WRAP_CPP(MOC_FILES ${MOCABLE_LIST})
QT4_ADD_RESOURCES(RESOURCE_SRC ${RESOURCE_LIST})
QT4_WRAP_UI(UI_HDR ${UI_LIST})

SOURCE_GROUP("UI Files" FILES ${UI_LIST})
SOURCE_GROUP("Generated Files" FILES ${MOC_FILES} ${UI_HDR} ${RESOURCE_SRC})
SOURCE_GROUP("Resources" FILES ${RESOURCE_LIST})

ADD_EXECUTABLE(${PROJECT_NAME} ${HEADER_LIST} ${SOURCE_LIST} ${MOC_FILES} ${UI_HDR} ${RESOURCE_SRC})
ADD_DEPENDENCIES(${PROJECT_NAME} glew QGLViewer)
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${QT_LIBRARIES} ${FREEGLUT_LIBRARIES} ${OPENGL_LIBRARIES} glew QGLViewer)
SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINK_FLAGS ${LARGEADDRESSAWARE})
